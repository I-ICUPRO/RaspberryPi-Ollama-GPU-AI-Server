# RaspberryPi-Ollama-GPU-AI-Server

### Заметки: Как настроить UmbrelOS + Ollama с GPU через API

#### Цель
- Устройство с UmbrelOS (Raspberry Pi 5, мини-ПК или другой компьютер без GPU): работает OpenWebUI как интерфейс.
- Мощный ПК: отдельная ОС с Ollama и поддержкой GPU для максимальной мощности.
- Связь через локальную сеть по API.

---

#### 1. Настройка мощного ПК с Ollama
1. **Установить ОС**:
   - Выбрать лёгкую ОС: Ubuntu Server, Debian или Arch Linux (минимальная нагрузка на ресурсы).
   - Установить только базовые пакеты, чтобы всё шло на Ollama.
2. **Установить драйверы GPU**:
   - Для Nvidia: установить CUDA и cuDNN (например, `sudo apt install nvidia-driver nvidia-cuda-toolkit` на Ubuntu).
   - Для AMD: установить ROCm (проверить совместимость карты на сайте Ollama).
3. **Установить Ollama**:
   - Скачать и установить с официального сайта: `curl -fsSL https://ollama.com/install.sh | sh`.
   - Проверить версию: `ollama --version`.
   - Запустить сервер: `ollama serve` (должен быть доступен на `http://0.0.0.0:11434`).
4. **Настроить сеть**:
   - Узнать локальный IP ПК (например, `192.168.1.100`) с помощью `ip addr` или `ifconfig`.
   - Открыть порт 11434 в фаерволе (если есть): `sudo ufw allow 11434`.
5. **Тест**:
   - Проверить API с другого устройства: `curl http://192.168.1.100:11434/api/version`.
   - Установить модель (например, `ollama pull llama3`) и протестировать.

---

#### 2. Настройка устройства с UmbrelOS (Raspberry Pi 5, мини-ПК или другой компьютер)
1. **Выбор устройства**:
   - Можно использовать Raspberry Pi 5, мини-ПК (например, Intel NUC) или любой другой компьютер.
   - GPU не требуется, достаточно процессора и памяти для OpenWebUI (2-4 ГБ RAM хватит).
2. **Установить UmbrelOS**:
   - Скачать образ с сайта Umbrel, записать на SD-карту (для Raspberry Pi) или USB/диск (для мини-ПК/ПК) через Balena Etcher.
   - Подключить устройство к сети, включить.
3. **Запустить Umbrel**:
   - Дождаться загрузки, открыть в браузере `umbrel.local` или IP устройства (например, `192.168.1.101`).
   - Завершить начальную настройку.
4. **Установить OpenWebUI**:
   - В магазине приложений Umbrel найти и установить OpenWebUI.
5. **Подключить к Ollama**:
   - Открыть настройки OpenWebUI в Umbrel.
   - Указать адрес API: `http://192.168.1.100:11434` (заменить на IP твоего ПК с Ollama).
   - Сохранить и перезапустить OpenWebUI.
6. **Тест**:
   - Зайти в OpenWebUI через браузер, отправить запрос (например, "Привет!").
   - Убедиться, что ответ приходит от Ollama на ПК.

---

#### 3. Важные моменты
- **Сеть**: Подключить оба устройства к одной локальной сети (лучше через Ethernet для стабильности).
- **Безопасность**: Если только локально, ничего менять не надо. Если нужен доступ извне, настроить HTTPS или VPN.
- **Обновления**: Следить за версиями Ollama и OpenWebUI, чтобы они были совместимы.
- **Запуск Ollama**: На ПК настроить автозапуск (`systemd` или скрипт), чтобы Ollama стартовала с системой.

---

#### Пример работы
1. ПК (192.168.1.100): Ollama с GPU обрабатывает модель.
2. Устройство с UmbrelOS (192.168.1.101): OpenWebUI отправляет запрос через API.
3. Ты в браузере на `umbrel.local` видишь чат и управляешь всем.

---

#### Напоминания
- Проверить, что GPU используется на ПК: `nvidia-smi` (для Nvidia) или логи Ollama.
- Если что-то не работает, проверить доступность API: `curl http://192.168.1.100:11434`.
- Держать ПК включённым, когда нужен ИИ.